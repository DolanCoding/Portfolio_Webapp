# CODEMAP â€” Repository Overview

Last Updated: 2025-08-10
Generated by: Workspace Optimizer â€” Single Agent Mode

1. Entrypoints

- Backend API: my-portfolio-backend/server.ts // â›³ AGENT-ENTRYPOINT
- Frontend App: my-portfolio-frontend/src/main.tsx // â›³ AGENT-ENTRYPOINT

2. Architecture Snapshot (Diagram)

```mermaid
graph TD
  FE[Frontend (React/Vite)] -->|HTTP/JSON| BE[Backend (Express/TS)]
  BE -->|SQL| DB[(SQLite file: db/portfolio.db)]
  FE -. uses .-> ST[shared-types]
  BE -. uses .-> ST
```

Notes:

- Contracts: Project, Certificate (shared-types/index.ts) // ðŸ§ª CONTRACT
- Static assets served by backend under /images/\* from my-portfolio-backend/db/Data/images
- Config: Frontend uses VITE_API_BASE_URL; Backend uses PORT, DB_PATH // ðŸ”’ INVARIANTS

3. Module & Folder Overview

- my-portfolio-backend/: Express API, DB init, static image serving
- my-portfolio-frontend/: React SPA (lazy-loaded routes), API client, UI components
- shared-types/: TypeScript interfaces shared across packages
- .github/workflows/: CI pipeline (currently frontend-only)
- AGENT/: Optimizer instructions, templates, outputs, logs

4. Bounded Contexts

- Portfolio Content: Projects, Certificates (data read-only via API)
- Delivery: HTTP API, Frontend routing and rendering

5. Cross-Cutting Concerns

- Config: frontend src/config.ts; backend dotenv + process.env
- Error handling: basic try/catch in routes; axios error sanitization in frontend
- Performance: frontend route-level code splitting; static assets cached by browser

6. External Dependencies

- Backend: express, cors, dotenv, sqlite, sqlite3
- Frontend: react, react-router-dom, axios, testing-library
- Tooling: TypeScript, Vite

7. Data Models & Contracts

- shared-types/index.ts: Project, Certificate // ðŸ§ª CONTRACT
- Backend routes:
  - GET /api/projects -> Project[]
  - GET /api/certificates -> Certificate[]

8. Testing Strategy (target)

- Frontend: Vitest + React Testing Library (unit/component)
- Backend: Jest + supertest (route contract tests)
- Contract tests: shape of Project and Certificate from API

9. CI/CD Overview (target)

- Jobs: frontend and backend (install -> typecheck -> lint -> test -> build)
- Node: 22.x unified
- Cache: npm dependencies
- Artifact: frontend build (optional), backend build (optional)

10. Known Risks & Debt

- TS version drift (frontend 4.9, backend 5.5) â€” unify to TS 5.x
- CI runs frontend only and calls scripts that may not exist
- No automated contract tests for API payloads
- Shared types imported as value in backend (should be type-only)

11. Future Agent Notes

- Respect ENV invariants (VITE_API_BASE_URL, PORT, DB_PATH)
- Prefer adding TODO(ai) markers with rationale and plan
- Keep public API routes stable; add contract tests before changes
